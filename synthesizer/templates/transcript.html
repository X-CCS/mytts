<head>
    <title>
        Synthesizer
    </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            type="text/javascript"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          type="text/css">
</head>

<body>
<script type="text/javascript">
    $(document).ready(function () {
        $("#transcriptForm").submit(function (e) {
            // prevent from normal form behaviour
            e.preventDefault();
            // serialize the form data
            let serializedData = $(this).serialize();
            $.ajax({
                type: 'POST',
                url: "{% url 'transcript' %}",
                data: serializedData,
                success: function (response) {
                    //reset the form after successful submit
                    alert(response.path);
                    $("#player").attr("src", response.path);
                    $("#transcriptForm")[0].reset();

                },
                error: function (response) {
                    console.log(response)
                }
            });
        });
    });
</script>
<div id="message">

</div>
<div class="container">
    <div class="row">
        <div class="col-md-4 col-md-offset-4">
            <div class="form-group">
                <form method="POST" id="transcriptForm" action=".">
                    {% csrf_token %}
                    {{ form }}
                    <input type="submit" value="Submit" class="btn btn-success">
                </form>
                <div class="col-sm-6">
                    <p>play audio</p>
                    <audio controls>
                        <source src="/media/wav/cn.mp3" type="audio/mp3" id="player">
                        Your browser does not support the audio element.
                    </audio>
                </div>
            </div>
        </div>
    </div>
</div>
</body>